
<h1> <%= @politician.full_name %> </h1>
<h3> <%= @politician.party %> </h3>
<img src='<%=@politician.image%>' width="125px">

<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var choiceArray = <%=raw @politician.get_chart_data %>
    var data = google.visualization.arrayToDataTable(choiceArray);

    var options = {
      is3D: true,
      backgroundColor: 'none',
      chartArea: { left:20,top:0,width:'75%', height:'95%'},
      fontName: "Helvetica"
  };

    var chart = new google.visualization.PieChart(document.getElementById("piechart"));
    chart.draw(data, options);
}
</script>
<div id="piechart"></div>
<% if session[:user_id] %>
<%= render 'shared/form'%>
<% end %>
<ul>
<% @politician.comments.each do |comm| %>
  <% next unless comm.persisted? %>
  <%# value for comm.id is actually the politician's id %>
  <img src="<%= asset_path( 'up_vote.jpeg' ) %>" value="<%=comm.id%>" alt="up_vote" class="vote" ><img src="<%= asset_path( 'down_vote.jpeg' ) %>" value="<%=comm.id%>" alt="down_vote" class="vote"><li><%= comm.user.username %>:<br><%= comm.content %></li>
  <% if comm.user_id == session[:user_id] %>
    <%= link_to 'Delete Comment', comment_path(comm), method: :delete %>
  <% end %>
<% end %>
</ul>

